(this["webpackJsonpreact-front"]=this["webpackJsonpreact-front"]||[]).push([[0],{11:function(e,t,a){e.exports=a.p+"static/media/avatar.046e91f7.jpg"},14:function(e,t,a){e.exports=a.p+"static/media/post.33f2c941.jpg"},29:function(e,t,a){e.exports=a(41)},41:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),s=a(25),c=a.n(s),o=a(4),i=a(5),l=a(7),u=a(6),m=a(8),p=a(17),d=a(1),h=a.n(d),f=a(2),b=function(){var e=Object(f.a)(h.a.mark((function e(t){var a,n;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("".concat("https://hung-social-api.azurewebsites.net","/posts/").concat(t));case 2:return a=e.sent,e.next=5,a.json();case 5:return n=e.sent,e.abrupt("return",n);case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),v=function(){var e=Object(f.a)(h.a.mark((function e(){var t,a;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("".concat("https://hung-social-api.azurewebsites.net","/posts"));case 2:return t=e.sent,e.next=5,t.json();case 5:return a=e.sent,e.abrupt("return",a);case 7:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),g=function(){var e=Object(f.a)(h.a.mark((function e(t){var a,n,r;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=JSON.parse(localStorage.getItem("jwt")).token,e.next=3,fetch("".concat("https://hung-social-api.azurewebsites.net","/me/post"),{method:"POST",headers:{Accept:"application/json","Content-Type":"application/json",Authorization:"Bearer "+a},body:JSON.stringify(t)});case 3:return n=e.sent,e.next=6,n.json();case 6:return r=e.sent,e.abrupt("return",r);case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),E=function(){var e=Object(f.a)(h.a.mark((function e(t,a){var n,r,s;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=JSON.parse(localStorage.getItem("jwt")).token,e.next=3,fetch("".concat("https://hung-social-api.azurewebsites.net","/me/posts/").concat(t),{method:"PATCH",headers:{Accept:"application/json","Content-Type":"application/json",Authorization:"Bearer "+n},body:JSON.stringify(a)});case 3:return r=e.sent,e.next=6,r.json();case 6:return s=e.sent,e.abrupt("return",s);case 8:case"end":return e.stop()}}),e)})));return function(t,a){return e.apply(this,arguments)}}(),w=function(){var e=Object(f.a)(h.a.mark((function e(t){var a,n,r;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=JSON.parse(localStorage.getItem("jwt")).token,e.next=3,fetch("".concat("https://hung-social-api.azurewebsites.net","/me/posts/").concat(t),{method:"DELETE",headers:{Authorization:"Bearer "+a}});case 3:return n=e.sent,r=n.json(),e.abrupt("return",r);case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),y=function(){var e=Object(f.a)(h.a.mark((function e(t,a){var n,r,s;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=JSON.parse(localStorage.getItem("jwt")).token,e.next=3,fetch("".concat("https://hung-social-api.azurewebsites.net","/me/posts/upload/").concat(a),{method:"POST",headers:{Authorization:"Bearer "+n},body:t});case 3:return r=e.sent,e.next=6,r.json();case 6:return s=e.sent,e.abrupt("return",s);case 8:case"end":return e.stop()}}),e)})));return function(t,a){return e.apply(this,arguments)}}(),j=function(){var e=Object(f.a)(h.a.mark((function e(t){var a,n;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("".concat("https://hung-social-api.azurewebsites.net","/posts/").concat(t,"/owner"));case 2:return a=e.sent,e.next=5,a.json();case 5:return n=e.sent,e.abrupt("return",n);case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),N=function(){var e=Object(f.a)(h.a.mark((function e(t){var a,n,r;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=JSON.parse(localStorage.getItem("jwt")).token,e.next=3,fetch("".concat("https://hung-social-api.azurewebsites.net","/posts/").concat(t,"/like"),{method:"PUT",headers:{Accept:"application/json","Content-Type":"application/json",Authorization:"Bearer "+a}});case 3:return n=e.sent,e.next=6,n.json();case 6:return r=e.sent,e.abrupt("return",r);case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),O=function(){var e=Object(f.a)(h.a.mark((function e(t){var a,n,r;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=JSON.parse(localStorage.getItem("jwt")).token,e.next=3,fetch("".concat("https://hung-social-api.azurewebsites.net","/posts/").concat(t,"/dislike"),{method:"PUT",headers:{Accept:"application/json","Content-Type":"application/json",Authorization:"Bearer "+a}});case 3:return n=e.sent,e.next=6,n.json();case 6:return r=e.sent,e.abrupt("return",r);case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),k=function(){var e=Object(f.a)(h.a.mark((function e(t,a){var n,r,s;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=JSON.parse(localStorage.getItem("jwt")).token,e.next=3,fetch("".concat("https://hung-social-api.azurewebsites.net","/posts/").concat(t,"/comment"),{method:"PUT",headers:{Accept:"application/json","Content-Type":"application/json",Authorization:"Bearer "+n},body:JSON.stringify({comment:a})});case 3:return r=e.sent,e.next=6,r.json();case 6:return s=e.sent,e.abrupt("return",s);case 8:case"end":return e.stop()}}),e)})));return function(t,a){return e.apply(this,arguments)}}(),x=a(14),S=a.n(x),C=a(3),I=function(e){return fetch("".concat("https://hung-social-api.azurewebsites.net","/signup"),{method:"POST",headers:{Accept:"application/json","Content-Type":"application/json"},body:JSON.stringify(e)}).then((function(e){return e.json()}))},T=function(e){return fetch("".concat("https://hung-social-api.azurewebsites.net","/login"),{method:"POST",headers:{Accept:"application/json","Content-Type":"application/json"},body:JSON.stringify(e)}).then((function(e){return e.json()}))},_=function(e){if("undefined"!==window){var t=JSON.parse(localStorage.getItem("jwt")).token;localStorage.removeItem("jwt")}return e(),fetch("".concat("https://hung-social-api.azurewebsites.net","/logout"),{method:"POST",headers:{Authorization:"Bearer "+t}}).then((function(e){return console.log("sign out status",e.status),e})).catch((function(e){return console.log("Signout error: ",e)}))},A=function(e,t){"undefined"!==typeof window&&(localStorage.setItem("jwt",JSON.stringify(e)),t())},P=function(){return"undefined"!==typeof window&&(!!localStorage.getItem("jwt")&&JSON.parse(localStorage.getItem("jwt")))},D=a(16),F=a.n(D),U=function(e){function t(){var e,a;Object(o.a)(this,t);for(var n=arguments.length,s=new Array(n),c=0;c<n;c++)s[c]=arguments[c];return(a=Object(l.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(s)))).renderImg=function(e){var t=e._id?"".concat("https://hung-social-api.azurewebsites.net","/posts/photo/").concat(e._id):S.a;return r.a.createElement("img",{src:t,alt:e.title,className:"card-img-top mt-3",onError:function(e){return e.target.src="".concat(S.a)},style:{width:"100%",height:"25vh",objectFit:"cover"}})},a.renderBodyText=function(e){var t=e.split(" ");if(t.length<=4)return e;for(var a="",n=0;n<4;n++)a+=t[n],a+=" ";return a+" ..."},a}return Object(m.a)(t,e),Object(i.a)(t,[{key:"render",value:function(){var e=this.props.post,t=e.owner,a=F()(e.createdAt).calendar(),n=t.name;if(P()){var s=P().user;t._id===s._id&&(n="You")}return r.a.createElement("div",{ref:this.postRef,className:"card col-md-3 ml-5 mt-5",style:{width:"18rem"}},this.renderImg(e),r.a.createElement("div",{className:"card-body"},r.a.createElement("h5",{className:"card-title"},e.title),r.a.createElement("p",{className:"card-text"},this.renderBodyText(e.body)),r.a.createElement("br",null),r.a.createElement("p",{className:"font-italic mark"},"Posted By ",r.a.createElement(C.b,{to:"/".concat(t._id)},"".concat(n))," on"," ",a),r.a.createElement(C.b,{to:"/post/".concat(e._id),className:"btn btn-raised btn-primary card-link"},"Read More"),P()&&P().user._id===t._id?r.a.createElement(C.b,{to:"/post/".concat(e._id,"/edit"),className:"btn btn-raised btn-info card-link"},"Update"):r.a.createElement("div",null)))}}]),t}(r.a.Component),z=function(e){function t(){var e,a;Object(o.a)(this,t);for(var n=arguments.length,s=new Array(n),c=0;c<n;c++)s[c]=arguments[c];return(a=Object(l.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(s)))).state={posts:[],users:[],error:null},a.renderPosts=function(){var e=a.state.posts;return r.a.createElement("div",{className:"row"},e.map((function(e){return r.a.createElement(U,{post:e,key:e._id})})))},a}return Object(m.a)(t,e),Object(i.a)(t,[{key:"componentDidMount",value:function(){var e=Object(f.a)(h.a.mark((function e(){var t;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,v();case 2:t=e.sent,this.setState({posts:t});case 4:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){return r.a.createElement("div",{className:"container"},r.a.createElement("h3",{className:"mt-5 mb-5 ml-4"},this.state.posts.length?r.a.createElement("div",null,"Recent Posts"):r.a.createElement("div",{className:"ui active dimmer"},r.a.createElement("div",{className:"ui huge text loader"},"Fetching Posts ..."))),this.renderPosts())}}]),t}(r.a.Component),L=function(e){function t(){return Object(o.a)(this,t),Object(l.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(m.a)(t,e),Object(i.a)(t,[{key:"render",value:function(){return r.a.createElement("div",null,r.a.createElement("div",{className:"jumbotron"},r.a.createElement("h2",null,"Home"),"Welcome to React Frontend"),r.a.createElement(z,null))}}]),t}(r.a.Component),B=a(9),J=function(e){function t(){var e,a;Object(o.a)(this,t);for(var n=arguments.length,r=new Array(n),s=0;s<n;s++)r[s]=arguments[s];return(a=Object(l.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(r)))).state={name:"",email:"",password:"",error:"",open:!1},a.onInputChange=function(e){return function(t){a.setState(Object(B.a)({},e,t.target.value))}},a.onClickSubmit=function(e){e.preventDefault();var t=a.state,n=t.name,r=t.email,s=t.password,c=t.confirmPassword;I({name:n,email:r,password:s,confirmPassword:c}).then((function(e){e.error?a.setState({error:e.error}):a.setState({name:"",email:"",password:"",open:!0,error:""})}))},a}return Object(m.a)(t,e),Object(i.a)(t,[{key:"render",value:function(){return r.a.createElement("div",{className:"container"},r.a.createElement("h2",{className:"mt-5 mb-5"},"Sign Up"),r.a.createElement("div",{className:"alert alert-danger",style:{display:this.state.error?"":"none"}},this.state.error),r.a.createElement("div",{className:"alert alert-info",style:{display:this.state.open?"":"none"}},"A new account has been successfully created. Please"," ",r.a.createElement(C.b,{to:"/signin"},"Sign in.")),r.a.createElement("form",null,r.a.createElement("div",{className:"form-group"},r.a.createElement("label",{className:"text-muted"},"Name"),r.a.createElement("input",{className:"form-control",onChange:this.onInputChange("name"),value:this.state.name})),r.a.createElement("div",{className:"form-group"},r.a.createElement("label",{className:"text-muted"},"Email"),r.a.createElement("input",{onChange:this.onInputChange("email"),className:"form-control",value:this.state.email})),r.a.createElement("div",{className:"form-group"},r.a.createElement("label",{className:"text-muted"},"Passowrd"),r.a.createElement("input",{type:"password",onChange:this.onInputChange("password"),className:"form-control",value:this.state.password})),r.a.createElement("div",{className:"form-group"},r.a.createElement("label",{className:"text-muted"},"Confirm Password"),r.a.createElement("input",{type:"password",onChange:this.onInputChange("confirmPassword"),className:"form-control",value:this.state.confirmPassword})),r.a.createElement("button",{onClick:this.onClickSubmit,className:"btn btn-raised btn-primary"},"Submit")))}}]),t}(r.a.Component),R=function(e){function t(){var e,a;Object(o.a)(this,t);for(var n=arguments.length,s=new Array(n),c=0;c<n;c++)s[c]=arguments[c];return(a=Object(l.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(s)))).state={email:"",password:"",error:"",redirectToReferer:!1,loading:!1},a.onInputChange=function(e){return function(t){a.setState(Object(B.a)({},e,t.target.value))}},a.onClickSubmit=function(e){e.preventDefault(),a.setState({loading:!0});var t=a.state,n=t.email,r=t.password;T({email:n,password:r}).then((function(e){e.error?a.setState({error:e.error,loading:!1}):A(e,(function(){a.setState({redirectToReferer:!0})}))}))},a.renderLoading=function(){return!0===a.state.loading?r.a.createElement("div",{className:"jumbotron text-center"},r.a.createElement("h2",null,"Loading...")):""},a}return Object(m.a)(t,e),Object(i.a)(t,[{key:"render",value:function(){return this.state.redirectToReferer?r.a.createElement(p.a,{to:"/"}):r.a.createElement("div",{className:"container"},r.a.createElement("h2",{className:"mt-5 mb-5"},"Sign In"),r.a.createElement("div",{className:"alert alert-danger",style:{display:this.state.error?"":"none"}},this.state.error),this.renderLoading(),r.a.createElement("form",null,r.a.createElement("div",{className:"form-group"},r.a.createElement("label",{className:"text-muted"},"Email"),r.a.createElement("input",{onChange:this.onInputChange("email"),className:"form-control",value:this.state.email})),r.a.createElement("div",{className:"form-group"},r.a.createElement("label",{className:"text-muted"},"Passowrd"),r.a.createElement("input",{type:"password",onChange:this.onInputChange("password"),className:"form-control",value:this.state.password})),r.a.createElement("button",{onClick:this.onClickSubmit,className:"btn btn-raised btn-primary"},"Sign In")))}}]),t}(r.a.Component),M=Object(p.g)((function(e){return r.a.createElement("div",null,r.a.createElement("ul",{className:"nav nav-tabs bg-primary"},r.a.createElement("li",{className:"nav-item"},r.a.createElement(C.b,{className:"nav-link",to:"/"},"Home")),r.a.createElement("li",{className:"nav-item"},r.a.createElement(C.b,{className:"nav-link",to:"/users"},"Users")),P()&&r.a.createElement(r.a.Fragment,null,r.a.createElement("li",{className:"nav-item"},r.a.createElement(C.b,{className:"nav-link",to:"/find"},"Find User"))),P()&&r.a.createElement(r.a.Fragment,null,r.a.createElement("li",{className:"nav-item"},r.a.createElement(C.b,{className:"nav-link",to:"/new/post"},"Create Post"))),!P()&&r.a.createElement(r.a.Fragment,null,r.a.createElement("li",{className:"nav-item"},r.a.createElement(C.b,{className:"nav-link",to:"/signup"},"Sign Up")),r.a.createElement("li",{className:"nav-item"},r.a.createElement(C.b,{className:"nav-link",to:"signin"},"Sign In"))),P()&&r.a.createElement(r.a.Fragment,null,r.a.createElement("li",{className:"nav-item"},r.a.createElement(C.b,{className:"nav-link",to:"/".concat(P().user._id)},P().user.name,"'s Profile")),r.a.createElement("li",{className:"nav-item"},r.a.createElement("span",{style:{cursor:"pointer"},className:"nav-link",onClick:function(){return _((function(){return e.history.push("/")}))}},"Sign Out")))))})),Y=function(){var e=Object(f.a)(h.a.mark((function e(t){var a,n;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("".concat("https://hung-social-api.azurewebsites.net","/users/").concat(t));case 2:return a=e.sent,e.next=5,a.json();case 5:return n=e.sent,e.abrupt("return",n);case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),H=function(){var e=Object(f.a)(h.a.mark((function e(){var t,a;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("".concat("https://hung-social-api.azurewebsites.net","/users"));case 2:return t=e.sent,e.next=5,t.json();case 5:return a=e.sent,e.abrupt("return",a);case 7:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),q=function(){var e=Object(f.a)(h.a.mark((function e(){var t,a,n;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=JSON.parse(localStorage.getItem("jwt")).token,e.next=3,fetch("".concat("https://hung-social-api.azurewebsites.net","/users/me"),{method:"DELETE",headers:{Accept:"application/json","Content-Type":"application/json",Authorization:"Bearer "+t}});case 3:return a=e.sent,e.next=6,a.json();case 6:return n=e.sent,e.abrupt("return",n);case 8:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),V=function(){var e=Object(f.a)(h.a.mark((function e(t){var a,n,r;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=JSON.parse(localStorage.getItem("jwt")).token,e.next=3,fetch("".concat("https://hung-social-api.azurewebsites.net","/users/me/avatar"),{method:"POST",headers:{Authorization:"Bearer "+a},body:t});case 3:return n=e.sent,e.next=6,n.json();case 6:return r=e.sent,e.abrupt("return",r);case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),W=function(){var e=Object(f.a)(h.a.mark((function e(t){var a,n,r;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=JSON.parse(localStorage.getItem("jwt")).token,e.next=3,fetch("".concat("https://hung-social-api.azurewebsites.net","/users/me"),{method:"PATCH",headers:{Accept:"application/json","Content-Type":"application/json",Authorization:"Bearer "+a},body:JSON.stringify(t)});case 3:return n=e.sent,e.next=6,n.json();case 6:return r=e.sent,e.abrupt("return",r);case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),G=function(){var e=Object(f.a)(h.a.mark((function e(t){var a,n,r;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=JSON.parse(localStorage.getItem("jwt")).token,e.next=3,fetch("".concat("https://hung-social-api.azurewebsites.net","/users/follow"),{method:"PUT",headers:{Accept:"application/json","Content-Type":"application/json",Authorization:"Bearer "+a},body:JSON.stringify({followId:t})});case 3:return n=e.sent,e.next=6,n.json();case 6:return r=e.sent,e.abrupt("return",r);case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),K=function(){var e=Object(f.a)(h.a.mark((function e(t){var a,n,r;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=JSON.parse(localStorage.getItem("jwt")).token,e.next=3,fetch("".concat("https://hung-social-api.azurewebsites.net","/users/unfollow"),{method:"PUT",headers:{Accept:"application/json","Content-Type":"application/json",Authorization:"Bearer "+a},body:JSON.stringify({unfollowId:t})});case 3:return n=e.sent,e.next=6,n.json();case 6:return r=e.sent,e.abrupt("return",r);case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),Q=function(){var e=Object(f.a)(h.a.mark((function e(t){var a,n;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("".concat("https://hung-social-api.azurewebsites.net","/users/").concat(t,"/followStatus"));case 2:return a=e.sent,e.next=5,a.json();case 5:return n=e.sent,e.abrupt("return",n);case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),X=function(){var e=Object(f.a)(h.a.mark((function e(){var t,a,n;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=JSON.parse(localStorage.getItem("jwt")).token,e.next=3,fetch("".concat("https://hung-social-api.azurewebsites.net","/users/findUserToFollow"),{method:"GET",headers:{Authorization:"Bearer "+t}});case 3:return a=e.sent,e.next=6,a.json();case 6:return n=e.sent,e.abrupt("return",n);case 8:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),Z=function(){var e=Object(f.a)(h.a.mark((function e(t){var a,n;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("".concat("https://hung-social-api.azurewebsites.net","/").concat(t,"/posts"));case 2:return a=e.sent,e.next=5,a.json();case 5:return n=e.sent,e.abrupt("return",n);case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),$=a(11),ee=a.n($),te=function(e){function t(){var e,a;Object(o.a)(this,t);for(var n=arguments.length,r=new Array(n),s=0;s<n;s++)r[s]=arguments[s];return(a=Object(l.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(r)))).deleteAccount=Object(f.a)(h.a.mark((function e(){return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,q();case 2:_((function(){return console.log("signout")})),a.props.history.push("/");case 4:case"end":return e.stop()}}),e)}))),a.confirmDelete=function(){window.confirm("Are you sure you want to delete your account?")&&a.deleteAccount()},a}return Object(m.a)(t,e),Object(i.a)(t,[{key:"render",value:function(){return r.a.createElement(r.a.Fragment,null,r.a.createElement("button",{onClick:this.confirmDelete,className:"btn btn-raised btn-danger",to:"/"},"Delete Profile"))}}]),t}(r.a.Component),ae=Object(p.g)(te),ne=function(e){function t(){return Object(o.a)(this,t),Object(l.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(m.a)(t,e),Object(i.a)(t,[{key:"render",value:function(){var e=this,t=this.props.following;return r.a.createElement("div",{className:"d-inline-block mt-5"},t?r.a.createElement("button",{className:"btn btn-warning btn-raised mt-3",onClick:function(){return e.props.onUnfollowClick(K)}},"Unfollow"):r.a.createElement("button",{className:"btn btn-success btn-raised mt-3 mr-3",onClick:function(){return e.props.onFollowClick(G)}},"Follow"))}}]),t}(r.a.Component),re=function(e){function t(){var e,a;Object(o.a)(this,t);for(var n=arguments.length,s=new Array(n),c=0;c<n;c++)s[c]=arguments[c];return(a=Object(l.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(s)))).renderFollowers=function(){var e=a.props.followers;return r.a.createElement("div",{className:"col-md-4"},r.a.createElement("h3",{className:"text-primary"},"followers"),r.a.createElement("hr",null),e.map((function(e){return r.a.createElement("div",{key:e._id},r.a.createElement(C.b,{to:"/".concat(e._id)},r.a.createElement("img",{style:{borderRadius:"50%",border:"1px solid grey"},className:"float left mr-2",height:"50px",width:"50px",src:"".concat("https://hung-social-api.azurewebsites.net","/users/").concat(e._id,"/avatar"),onError:function(e){return e.target.src="".concat(ee.a)},alt:e.name}),r.a.createElement("div",null,r.a.createElement("p",{className:"lead"},e.name))))})))},a.renderFollowings=function(){var e=a.props.followings;return r.a.createElement("div",{className:"col-md-4"},r.a.createElement("h3",{className:"text-primary"},"followings"),r.a.createElement("hr",null),e.map((function(e){return r.a.createElement("div",{key:e._id},r.a.createElement(C.b,{to:"/".concat(e._id)},r.a.createElement("img",{style:{borderRadius:"50%",border:"1px solid grey"},className:"float left-mr-2",height:"50px",width:"50px",src:"".concat("https://hung-social-api.azurewebsites.net","/users/").concat(e._id,"/avatar"),onError:function(e){return e.target.src="".concat(ee.a)},alt:e.name}),r.a.createElement("div",null,r.a.createElement("p",{className:"lead"},e.name))))})))},a.renderPostTitle=function(e){var t=e.split(" ");if(t.length<=4)return e;for(var a="",n=0;n<4;n++)a+=t[n],a+=" ";return a+" ..."},a.renderPosts=function(){var e=a.props.posts;return r.a.createElement("div",{className:"col-md-4"},r.a.createElement("h3",{className:"text-primary"},"Posts"),r.a.createElement("hr",null),e.map((function(e){return r.a.createElement("div",{key:e._id},r.a.createElement(C.b,{to:"/post/".concat(e._id)},r.a.createElement("img",{style:{borderRadius:"50%",border:"1px solid grey"},className:"float left-mr-2",height:"50px",width:"50px",src:"".concat("https://hung-social-api.azurewebsites.net","/posts/photo/").concat(e._id),onError:function(e){return e.target.src="".concat(S.a)},alt:e.name}),r.a.createElement("div",null,r.a.createElement("p",{className:"lead"},a.renderPostTitle(e.title)))))})))},a}return Object(m.a)(t,e),Object(i.a)(t,[{key:"render",value:function(){return r.a.createElement("div",null,r.a.createElement("div",{className:"row"},this.renderFollowers(),this.renderFollowings(),this.renderPosts()))}}]),t}(r.a.Component),se=function(e){function t(){var e,a;Object(o.a)(this,t);for(var n=arguments.length,s=new Array(n),c=0;c<n;c++)s[c]=arguments[c];return(a=Object(l.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(s)))).state={user:"",reDirectToLogin:!1,isFollowThisUser:!1,followings:[],followers:[],posts:[],error:""},a.onFollowClick=function(){var e=Object(f.a)(h.a.mark((function e(t){var n;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t(a.state.user._id);case 2:if(!(n=e.sent).error){e.next=5;break}return e.abrupt("return",a.setState({error:n.error}));case 5:a.setState({followers:n.thisUserIsFollowedBy,isFollowThisUser:!0});case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),a.onUnfollowClick=function(){var e=Object(f.a)(h.a.mark((function e(t){var n;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t(a.state.user._id);case 2:if(n=e.sent,console.log(n),!n.error){e.next=8;break}return e.abrupt("return",a.setState({error:n.error}));case 8:a.setState({followers:n.thisUserIsFollowedBy,isFollowThisUser:!1});case 9:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),a.fetchUserAndFollowStatus=Object(f.a)(h.a.mark((function e(){var t,n,r,s,c,o,i;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=a.props.match.params.userId,e.next=3,Y(t);case 3:if(!(n=e.sent).error){e.next=6;break}return e.abrupt("return",a.setState({reDirectToLogin:!0}));case 6:return r=P().user._id,e.next=9,Y(r);case 9:return s=e.sent,c=s.followings.find((function(e){return e===t})),e.next=13,Q(t);case 13:return o=e.sent,e.next=16,Z(t);case 16:i=e.sent,c?a.setState({user:n,isFollowThisUser:!0,followings:o.thisUserFollowing,followers:o.thisUserIsFollowedBy,posts:i}):a.setState({user:n,isFollowThisUser:!1,followings:o.thisUserFollowing,followers:o.thisUserIsFollowedBy,posts:i});case 18:case"end":return e.stop()}}),e)}))),a.renderImg=function(){var e,t="".concat("https://hung-social-api.azurewebsites.net","/users/").concat(a.state.user._id,"/avatar");return r.a.createElement("img",(e={src:t,onError:function(e){return e.target.src="".concat(ee.a)},alt:a.state.user.name,className:"card-img-top col-md-6 mt-5 mb-5 img-thumbnail"},Object(B.a)(e,"alt",a.state.user.name),Object(B.a)(e,"style",{width:"auto",height:"25vw",objectFit:"cover"}),e))},a}return Object(m.a)(t,e),Object(i.a)(t,[{key:"componentDidMount",value:function(){var e=Object(f.a)(h.a.mark((function e(){return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:this.fetchUserAndFollowStatus();case 1:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"componentWillReceiveProps",value:function(e){var t=this;Y(e.match.params.userId).then((function(e){e.error?t.setState({reDirectToLogin:!0}):t.setState({user:e})}))}},{key:"render",value:function(){if(this.state.reDirectToLogin)return r.a.createElement(p.a,{to:"/"});console.log(this.state.user);var e=this.state.user,t=e.name,a=e.email;return r.a.createElement("div",{className:"container"},this.state.user.name?r.a.createElement("div",{className:"row"},this.renderImg(),r.a.createElement("div",{className:"col-md-6 lead"},r.a.createElement("h2",{className:"mt-5 mb-5"},"Profile"),r.a.createElement("p",null,"Hello ",r.a.createElement("strong",null,t)),r.a.createElement("p",null,"Email: ",r.a.createElement("strong",null,a)),r.a.createElement("div",null,"Joined at:",r.a.createElement("span",null,r.a.createElement("strong",null," ".concat(F()(this.state.user.createdAt).format("MMM Do YYYY"))))),P()&&P().user._id===this.state.user._id?r.a.createElement("div",{className:"d-inline-block mt-4"},r.a.createElement(C.b,{className:"btn btn-raised btn-success mr-5",to:"/users/edit/".concat(this.state.user._id)},"Edit Profile"),r.a.createElement(ae,{user:this.state.user})):r.a.createElement(ne,{following:this.state.isFollowThisUser,onFollowClick:this.onFollowClick,onUnfollowClick:this.onUnfollowClick})),r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"col-md-12"},r.a.createElement("hr",null),r.a.createElement("p",{className:"lead"},this.state.user.about),r.a.createElement(re,{followers:this.state.followers,followings:this.state.followings,posts:this.state.posts})))):r.a.createElement("div",{className:"ui active dimmer"},r.a.createElement("div",{className:"ui huge text loader"},"Fetching User ...")))}}]),t}(r.a.Component),ce=function(e){function t(){var e,a;Object(o.a)(this,t);for(var n=arguments.length,s=new Array(n),c=0;c<n;c++)s[c]=arguments[c];return(a=Object(l.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(s)))).state={users:[]},a.renderImg=function(e){var t,a=e._id?"".concat("https://hung-social-api.azurewebsites.net","/users/").concat(e._id,"/avatar"):ee.a;return r.a.createElement("img",(t={src:a,alt:e.name,className:"card-img-top mt-3"},Object(B.a)(t,"alt",e.name),Object(B.a)(t,"onError",(function(e){return e.target.src="".concat(ee.a)})),Object(B.a)(t,"style",{width:"100%",height:"25vh",objectFit:"cover"}),t))},a.renderUsers=function(){var e=a.state.users;return r.a.createElement("div",{className:"row"},e.map((function(e,t){return r.a.createElement("div",{className:"card col-md-3 ml-5 mt-5",style:{width:"18rem"},key:t},a.renderImg(e),r.a.createElement("div",{className:"card-body"},r.a.createElement("h5",{className:"card-title"},e.name),r.a.createElement("p",{className:"card-text"},e.email),r.a.createElement(C.b,{to:"/".concat(e._id),className:"btn btn-raised btn-primary"},"View Profile")))})))},a}return Object(m.a)(t,e),Object(i.a)(t,[{key:"componentDidMount",value:function(){var e=this;H().then((function(t){t.error?console.log(t.error):e.setState({users:t})}))}},{key:"render",value:function(){return r.a.createElement("div",{className:"container"},r.a.createElement("h2",{className:"mt-5 mb-5"},"Users"),this.renderUsers())}}]),t}(r.a.Component),oe=function(e){function t(){var e,a;Object(o.a)(this,t);for(var n=arguments.length,s=new Array(n),c=0;c<n;c++)s[c]=arguments[c];return(a=Object(l.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(s)))).state={_id:"",name:"",about:"",error:"",avatar:"",reDirectToProfile:!1,loading:!1},a.renderLoading=function(){return a.state.loading?r.a.createElement("div",{className:"jumbotron text-center"},r.a.createElement("h2",null,"Loading...")):""},a.renderImg=function(){var e="".concat("https://hung-social-api.azurewebsites.net","/users/").concat(a.state._id,"/avatar");return r.a.createElement("img",{id:"avatarImg",src:e,onError:function(e){return e.target.src="".concat(ee.a)},alt:a.state.name,style:{height:"200px",width:"auto"},className:"img-thumbnail"})},a.onUploadImg=function(e){var t=e.target.files[0];a.userData.set("avatar",t);var n=new FileReader;n.onload=function(e){document.querySelector("#avatarImg").setAttribute("src",e.target.result)},n.readAsDataURL(t)},a.onClickSubmit=function(){var e=Object(f.a)(h.a.mark((function e(t){var n,r,s,c,o;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.preventDefault(),a.setState({loading:!0}),n=a.state,r=n.name,s=n.about,""!==r){e.next=5;break}return e.abrupt("return",a.setState({loading:!1,error:"Your name must me provided!"}));case 5:return a.setState({error:""}),c={name:r.trim(),about:s.trim()},e.next=9,W(c);case 9:o=e.sent,a.setState({loading:!1}),o.error?a.setState({error:o.error.errmsg}):a.setState({reDirectToProfile:!0});case 12:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),a.onInputChange=function(e){return function(t){var n=t.target.value;a.setState(Object(B.a)({},e,n))}},a.onSubmitImg=function(){var e=Object(f.a)(h.a.mark((function e(t){var n;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),a.setState({loading:!0}),e.next=4,V(a.userData);case 4:n=e.sent,a.setState({loading:!1}),n.error&&a.setState({error:n.error.errmsg});case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),a}return Object(m.a)(t,e),Object(i.a)(t,[{key:"componentDidMount",value:function(){var e=Object(f.a)(h.a.mark((function e(){var t,a,n,r,s,c;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Y(this.props.match.params.userId);case 2:t=e.sent,this.userData=new FormData,t.error?this.setState({error:t.error.errmsg}):(a=t._id,n=t.name,r=t.email,s=t.about,c=t.avatar,this.setState({_id:a,name:n,email:r,about:s,avatar:c}));case 5:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){return this.state.reDirectToProfile?r.a.createElement(p.a,{to:"/".concat(this.state._id)}):r.a.createElement("div",{className:"container"},r.a.createElement("h2",{className:"mt-5 mb-5"},"Edit Your Profile"),r.a.createElement("div",{className:"alert alert-danger",style:{display:this.state.error?"":"none"}},this.state.error),this.renderLoading(),this.renderImg(),r.a.createElement("form",{action:"/",method:"POST",enctype:"multipart/form-data"},r.a.createElement("input",{id:"imgInp",type:"file",name:"avatar",onChange:this.onUploadImg,accept:"image/x-png,image/jpg,image/jpeg"}),r.a.createElement("div",null,r.a.createElement("button",{onClick:this.onSubmitImg,className:"btn btn-raised btn-primary mt-2"},"Update Your Avatar"))),r.a.createElement("form",null,r.a.createElement("div",{className:"form-group"},r.a.createElement("label",{className:"text-muted"},"Name"),r.a.createElement("input",{className:"form-control",onChange:this.onInputChange("name"),value:this.state.name})),r.a.createElement("div",{className:"form-group"},r.a.createElement("label",{className:"text-muted"},"About"),r.a.createElement("input",{onChange:this.onInputChange("about"),className:"form-control",value:this.state.about})),r.a.createElement("button",{onClick:this.onClickSubmit,className:"btn btn-raised btn-primary"},"Update")))}}]),t}(r.a.Component),ie=a(28),le=function(e){var t=e.component,a=Object(ie.a)(e,["component"]);return r.a.createElement(p.b,Object.assign({},a,{render:function(e){return P()?r.a.createElement(t,e):r.a.createElement(p.a,{to:{pathname:"/signin",state:{from:e.location}}})}}))},ue=function(e){function t(){var e,a;Object(o.a)(this,t);for(var n=arguments.length,s=new Array(n),c=0;c<n;c++)s[c]=arguments[c];return(a=Object(l.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(s)))).state={users:[],message:"",following:!1},a.renderImg=function(e){var t,a=e._id?"".concat("https://hung-social-api.azurewebsites.net","/users/").concat(e._id,"/avatar"):ee.a;return r.a.createElement("img",(t={src:a,alt:e.name,className:"card-img-top mt-3"},Object(B.a)(t,"alt",e.name),Object(B.a)(t,"onError",(function(e){return e.target.src="".concat(ee.a)})),Object(B.a)(t,"style",{width:"100%",height:"25vh",objectFit:"cover"}),t))},a.clickFollow=function(){var e=Object(f.a)(h.a.mark((function e(t){var n;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,G(t._id);case 2:(n=e.sent).error?a.setState({message:n.error}):a.setState({following:!0,message:"Following ".concat(t.name)});case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),a.renderUsers=function(){var e=a.state.users;return r.a.createElement("div",{className:"row"},e.map((function(e,t){return r.a.createElement("div",{className:"card col-md-3 ml-5 mt-5",style:{width:"18rem"},key:t},a.renderImg(e),r.a.createElement("div",{className:"card-body"},r.a.createElement("h5",{className:"card-title"},e.name),r.a.createElement("p",{className:"card-text"},e.email),r.a.createElement(C.b,{to:"/".concat(e._id),className:"btn btn-raised btn-primary"},"View Profile"),r.a.createElement("button",{onClick:function(){a.clickFollow(e)},className:"btn btn-raised btn-info float-right"},"Follow")))})))},a}return Object(m.a)(t,e),Object(i.a)(t,[{key:"componentDidMount",value:function(){var e=Object(f.a)(h.a.mark((function e(){var t;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,X();case 2:(t=e.sent).error&&console.log(t.error),this.setState({users:t});case 5:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){return r.a.createElement("div",{className:"container"},r.a.createElement("h2",{className:"mt-5 mb-5"},"Follow More Users"),r.a.createElement("div",null,this.state.following&&r.a.createElement("div",{className:"alert alert-success"},this.state.message)),this.renderUsers())}}]),t}(r.a.Component),me=function(e){function t(){var e,a;Object(o.a)(this,t);for(var n=arguments.length,s=new Array(n),c=0;c<n;c++)s[c]=arguments[c];return(a=Object(l.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(s)))).state={post:null,title:"",body:"",error:null,message:null,reDirectToPostsList:!1,loading:!1,user:null},a.renderLoading=function(){return a.state.loading?r.a.createElement("div",{className:"jumbotron text-center"},r.a.createElement("h2",null,"Loading...")):""},a.onClickSubmit=function(){var e=Object(f.a)(h.a.mark((function e(t){var n,r,s,c,o;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),a.setState({loading:!0}),n=a.state,r=n.title,s=n.body,c={title:r,body:s},e.next=6,g(c);case 6:o=e.sent,a.setState({post:o}),a.setState({loading:!1}),o.error?a.setState({error:o.error}):a.setState({title:"",body:"",reDirectToPostsList:!0});case 10:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),a.onInputChange=function(e){return function(t){a.setState(Object(B.a)({},e,t.target.value))}},a}return Object(m.a)(t,e),Object(i.a)(t,[{key:"componentDidMount",value:function(){var e=Object(f.a)(h.a.mark((function e(){return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:this.postData=new FormData,this.setState({user:P().user});case 2:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){return this.state.reDirectToPostsList?r.a.createElement(p.a,{to:"/"}):r.a.createElement("div",{className:"container"},r.a.createElement("h2",{className:"mt-5 mb-5"},"Create a new Post"),r.a.createElement("div",{className:"alert alert-danger",style:{display:this.state.error?"":"none"}},this.state.error),this.renderLoading(),r.a.createElement("form",null,r.a.createElement("div",{className:"form-group"},r.a.createElement("label",{className:"text-muted"},"Titlte"),r.a.createElement("input",{className:"form-control",onChange:this.onInputChange("title")})),r.a.createElement("div",{className:"form-group"},r.a.createElement("label",{className:"text-muted"},"Body"),r.a.createElement("input",{onChange:this.onInputChange("body"),className:"form-control"})),r.a.createElement("button",{onClick:this.onClickSubmit,className:"btn btn-raised btn-primary"},"Create")))}}]),t}(r.a.Component),pe=function(e){function t(){var e,a;Object(o.a)(this,t);for(var n=arguments.length,r=new Array(n),s=0;s<n;s++)r[s]=arguments[s];return(a=Object(l.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(r)))).state={reDirectToHome:!1},a.deletePost=Object(f.a)(h.a.mark((function e(){return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,w(a.props.post._id);case 2:a.setState({reDirectToHome:!0});case 3:case"end":return e.stop()}}),e)}))),a.confirmDelete=function(){window.confirm("Are you sure you want to delete this post?")&&a.deletePost()},a}return Object(m.a)(t,e),Object(i.a)(t,[{key:"render",value:function(){return this.state.reDirectToHome?r.a.createElement(p.a,{to:"/"}):r.a.createElement(r.a.Fragment,null,r.a.createElement("button",{onClick:this.confirmDelete,className:"btn btn-raised btn-danger card-link"},"Delete"))}}]),t}(r.a.Component),de=function(e){function t(){var e,a;Object(o.a)(this,t);for(var n=arguments.length,s=new Array(n),c=0;c<n;c++)s[c]=arguments[c];return(a=Object(l.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(s)))).state={value:"",error:""},a.handleChange=function(e){a.setState({value:e.target.value})},a.handleSubmit=function(e){e.preventDefault();var t=a.state.value;if(t.length>150)return a.setState({error:"Your comment should maximum 150 characters long!"});a.setState({error:""}),document.querySelector("textarea").value="",a.addComment(t)},a.addComment=function(){var e=Object(f.a)(h.a.mark((function e(t){var n,r,s,c;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=a.props.post._id,r={text:t},e.next=4,k(n,r);case 4:s=e.sent,c=s.comments,a.props.updateComment(c);case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),a.renderComments=function(){var e=a.props.comments;return r.a.createElement("div",null,r.a.createElement("h3",{className:"text-primary"},e.length," Comments"),r.a.createElement("hr",null),e.map((function(e,t){var a=e.postedBy;return r.a.createElement("div",{className:"comment"},r.a.createElement(C.b,{to:"/".concat(a._id),className:"avatar"},r.a.createElement("img",{src:"".concat("https://hung-social-api.azurewebsites.net","/users/").concat(a._id,"/avatar"),onError:function(e){return e.target.src="".concat(ee.a)},alt:a.name})),r.a.createElement("div",{className:"content"},r.a.createElement(C.b,{to:"/".concat(a._id),className:"author"},a.name),r.a.createElement("div",{className:"metadata"},r.a.createElement("span",{className:"date"},F()(e.createdAt).calendar())),r.a.createElement("div",{className:"text"},e.text)))})))},a}return Object(m.a)(t,e),Object(i.a)(t,[{key:"render",value:function(){return r.a.createElement("div",{className:"ui comments"},r.a.createElement("h3",{className:"ui dividing header"},"Comments"),r.a.createElement("div",{className:"alert alert-danger",style:{display:this.state.error?"":"none"}},this.state.error),r.a.createElement("div",{className:"append-comment"}),r.a.createElement("form",{className:"ui reply form"},r.a.createElement("div",{className:"field"},r.a.createElement("textarea",{onChange:this.handleChange})),r.a.createElement("button",{className:"ui blue labeled submit icon button",onClick:this.handleSubmit,type:"submit"},r.a.createElement("i",{className:"icon edit"})," Comment")),r.a.createElement("br",null),this.renderComments())}}]),t}(r.a.Component),he=function(e){function t(){var e,a;Object(o.a)(this,t);for(var n=arguments.length,s=new Array(n),c=0;c<n;c++)s[c]=arguments[c];return(a=Object(l.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(s)))).state={post:null,likeStatus:void 0,likes:0,redirectToHome:!1,comments:[]},a.updateComment=function(e){a.setState({comments:e})},a.renderImg=function(e){var t=e._id?"".concat("https://hung-social-api.azurewebsites.net","/posts/photo/").concat(e._id):S.a;return r.a.createElement("img",{src:t,alt:e.title,className:"img-thumbnail mb-3 ui medium rounded image",onError:function(e){return e.target.src="".concat(S.a)},style:{height:"500px",width:"100%",objectFit:"cover"}})},a.likeToggle=Object(f.a)(h.a.mark((function e(){var t,n,r,s,c,o;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=a.state,n=t.likeStatus,r=t.post,s=!n,a.setState({likeStatus:s}),!s){e.next=10;break}return e.next=6,N(r._id);case 6:c=e.sent,a.setState({likes:c.likes.length}),e.next=14;break;case 10:return e.next=12,O(r._id);case 12:o=e.sent,a.setState({likes:o.likes.length});case 14:case"end":return e.stop()}}),e)}))),a.renderPost=function(){var e=a.props.post,t=a.props.post.owner,n=a.state,s=n.likes,c=n.likeStatus,o=F()(e.createdAt).calendar(),i=t.name;if(P()){var l=P().user;t._id===l._id&&(i="You")}return r.a.createElement("div",{className:"card-body"},a.renderImg(e),c?r.a.createElement("div",{onClick:a.likeToggle,className:"ui labeled button mb-3",tabindex:"0"},r.a.createElement("div",{className:"ui red button"},r.a.createElement("i",{className:" heart icon"})," Like"),r.a.createElement("a",{className:"ui basic left pointing red label"},s)):r.a.createElement("div",{onClick:a.likeToggle,className:"ui labeled button mb-3",tabindex:"0"},r.a.createElement("div",{className:"ui button"},r.a.createElement("i",{className:" heart icon"})," Like"),r.a.createElement("a",{className:"ui basic left pointing label"},s)),r.a.createElement("div",{className:"card-text"},r.a.createElement("p",{className:"card-text text-justify"},e.body),P()&&P().user._id===t._id?r.a.createElement("div",null,r.a.createElement(C.b,{to:"/post/".concat(a.props.post._id,"/edit"),className:"btn btn-raised btn-info card-link"},"Update"),r.a.createElement(pe,{post:a.props.post})):r.a.createElement("div",null),r.a.createElement("br",null),r.a.createElement("p",{className:"font-italic mark"},"Posted By ",r.a.createElement(C.b,{to:"/".concat(t._id)},"".concat(i))," on"," ",o),r.a.createElement(C.b,{to:"/",className:"btn btn-raised btn-primary card-link"},"Back To Posts"),r.a.createElement("br",null),r.a.createElement(de,{post:a.state.post,comments:a.state.comments,updateComment:a.updateComment})))},a}return Object(m.a)(t,e),Object(i.a)(t,[{key:"componentDidMount",value:function(){var e=Object(f.a)(h.a.mark((function e(){var t,a;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t=P().user,a=this.props.post,a.likes.find((function(e){return e===t._id}))?this.setState({post:this.props.post,likes:this.props.post.likes.length,comments:a.comments,likeStatus:!0}):this.setState({post:this.props.post,likes:this.props.post.likes.length,comments:a.comments,likeStatus:!1});case 4:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){return r.a.createElement("div",{className:"container"},r.a.createElement("h3",{className:"display-2 mt-5 mb-5 ml-3"},this.props.post.title),this.props.post.body?this.renderPost():r.a.createElement("div",{className:"jumbotron text-center"},r.a.createElement("h2",null,"Loading...")))}}]),t}(r.a.Component),fe=function(e){function t(){var e,a;Object(o.a)(this,t);for(var n=arguments.length,s=new Array(n),c=0;c<n;c++)s[c]=arguments[c];return(a=Object(l.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(s)))).state={post:null,owner:[],error:null},a.getOwner=function(){var e=Object(f.a)(h.a.mark((function e(t){var a;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,j(t);case 2:if(!(a=e.sent).error){e.next=5;break}return e.abrupt("return","Unknown");case 5:return e.abrupt("return",a);case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),a.renderLoading=function(){return r.a.createElement("div",{className:"text-center"},r.a.createElement("div",{className:"spinner-border",role:"status"},r.a.createElement("span",{className:"sr-only"},"Loading...")))},a}return Object(m.a)(t,e),Object(i.a)(t,[{key:"componentDidMount",value:function(){var e=Object(f.a)(h.a.mark((function e(){var t,a;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=this.props.match.params.postId,e.next=3,b(t);case 3:if(!(a=e.sent).error){e.next=6;break}return e.abrupt("return",this.setState({error:a.error}));case 6:this.setState({post:a});case 7:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=this.state.post;return e?r.a.createElement("div",null,r.a.createElement(he,{post:e})):this.renderLoading()}}]),t}(r.a.Component),be=function(e){function t(){var e,a;Object(o.a)(this,t);for(var n=arguments.length,s=new Array(n),c=0;c<n;c++)s[c]=arguments[c];return(a=Object(l.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(s)))).state={_id:"",title:"",body:"",error:null,photo:null,Redirect:!1,loading:!1},a.onInputChange=function(e){return function(t){var n=t.target.value;a.setState(Object(B.a)({},e,n))}},a.renderImg=function(){var e="".concat("https://hung-social-api.azurewebsites.net","/posts/photo/").concat(a.state._id);return r.a.createElement("img",{id:"photoImg",src:e,onError:function(e){return e.target.src="".concat(S.a)},alt:a.state.name,style:{height:"200px",width:"auto"},className:"img-thumbnail"})},a.onUploadImg=function(e){var t=e.target.files[0];a.postData.set("photo",t);var n=new FileReader;n.onload=function(e){document.querySelector("#photoImg").setAttribute("src",e.target.result)},n.readAsDataURL(t)},a.onSubmitImg=function(){var e=Object(f.a)(h.a.mark((function e(t){var n;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),a.setState({loading:!0}),e.next=4,y(a.postData,a.state._id);case 4:n=e.sent,a.setState({loading:!1}),n.error&&a.setState({error:n.error.errmsg});case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),a.onClickSubmit=function(){var e=Object(f.a)(h.a.mark((function e(t){var n,r,s,c,o,i;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.preventDefault(),a.setState({loading:!0}),n=a.state,r=n._id,s=n.title,c=n.body,""!==s&&""!==c){e.next=5;break}return e.abrupt("return",a.setState({loading:!1,error:"Title and Body must be provided!"}));case 5:return o={title:s.trim(),body:c.trim()},e.next=8,E(r,o);case 8:i=e.sent,a.setState({loading:!1}),i.error?a.setState({error:i.error}):a.setState({Redirect:!0});case 11:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),a.renderLoading=function(){return a.state.loading?r.a.createElement("div",{className:"jumbotron text-center"},r.a.createElement("h2",null,"Loading...")):r.a.createElement("div",null)},a}return Object(m.a)(t,e),Object(i.a)(t,[{key:"componentDidMount",value:function(){var e=Object(f.a)(h.a.mark((function e(){var t,a,n,r;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,b(this.props.match.params.postId);case 2:if(t=e.sent,this.postData=new FormData,!t.error){e.next=8;break}return e.abrupt("return",this.setState({error:t.error.errmsg}));case 8:a=t._id,n=t.title,r=t.body,this.setState({_id:a,title:n,body:r});case 10:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){return this.state.Redirect?r.a.createElement(p.a,{to:"/"}):r.a.createElement("div",{className:"container"},r.a.createElement("h2",{className:"mt-5 mb-5"},"Edit Your Post"),r.a.createElement("div",{className:"alert alert-danger",style:{display:this.state.error?"":"none"}},this.state.error),this.renderLoading(),this.renderImg(),r.a.createElement("form",{action:"/",method:"POST",enctype:"multipart/form-data"},r.a.createElement("input",{id:"imgInp",type:"file",name:"avatar",onChange:this.onUploadImg,accept:"image/x-png,image/jpg,image/jpeg"}),r.a.createElement("div",null,r.a.createElement("button",{onClick:this.onSubmitImg,className:"btn btn-raised btn-primary mt-2"},"Upload Photo"))),r.a.createElement("form",null,r.a.createElement("div",{className:"form-group"},r.a.createElement("label",{className:"text-muted"},"Titlte"),r.a.createElement("input",{className:"form-control",onChange:this.onInputChange("title"),value:this.state.title})),r.a.createElement("div",{className:"form-group"},r.a.createElement("label",{className:"text-muted"},"Body"),r.a.createElement("input",{onChange:this.onInputChange("body"),className:"form-control",value:this.state.body})),r.a.createElement("button",{onClick:this.onClickSubmit,className:"btn btn-raised btn-primary"},"Update")))}}]),t}(r.a.Component),ve=function(){return r.a.createElement("div",null,r.a.createElement(M,null),r.a.createElement(p.d,null,r.a.createElement(p.b,{exact:!0,path:"/",component:L}),r.a.createElement(p.b,{exact:!0,path:"/users",component:ce}),r.a.createElement(p.b,{exact:!0,path:"/signup",component:J}),r.a.createElement(p.b,{exact:!0,path:"/signin",component:R}),r.a.createElement(le,{exact:!0,path:"/post/:postId",component:fe}),r.a.createElement(le,{exact:!0,path:"/post/:postId/edit",component:be}),r.a.createElement(le,{exact:!0,path:"/post/:postId/delete",component:pe}),r.a.createElement(le,{exact:!0,path:"/new/post",component:me}),r.a.createElement(le,{exact:!0,path:"/find",component:ue}),r.a.createElement(le,{exact:!0,path:"/:userId",component:se}),r.a.createElement(le,{exact:!0,path:"/users/edit/:userId",component:oe})))},ge=function(e){function t(){return Object(o.a)(this,t),Object(l.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(m.a)(t,e),Object(i.a)(t,[{key:"render",value:function(){return r.a.createElement(C.a,null,r.a.createElement(ve,null))}}]),t}(r.a.Component);c.a.render(r.a.createElement(ge,null),document.querySelector("#root"))}},[[29,1,2]]]);
//# sourceMappingURL=main.784926b8.chunk.js.map